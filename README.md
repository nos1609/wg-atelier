# wg-atelier

[English version üá¨üáß](README.en.md)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**wg-atelier** ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É—Ç–∏–ª–∏—Ç—ã `generate_wg_configs.py`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä WireGuard-–∫–æ–Ω—Ñ–∏–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ (`wg_config.yaml`), —Å–ø–∏—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–µ–π (`subnets.csv`) –∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π. –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏, —Å–ª–µ–¥–∏—Ç –∑–∞ PSK –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ–∞–π–ª `server/wg0.conf`, —Ç–∞–∫ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏ —Å QR-–∫–æ–¥–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ –∏ AmneziaWG –∏–∑ YAML;
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–≤–µ—Ä–∫–∞ CSV —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º `clients/<subnet>/` –∏ –¥–æ–∑–∞–ø—Ä–æ—Å –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è—Ö;
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤;
- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `wg-atelier.log` –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π `wg_config.yaml.<timestamp>.bak` –ø—Ä–∏ –∞–≤—Ç–æ–∑–∞–ø–∏—Å–∏ –∫–ª—é—á–µ–π;
- –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å PSK (–ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π);
- —Ä–µ–∂–∏–º `--validate` –¥–ª—è ¬´—Å—É—Ö–æ–π¬ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –í–Ω–µ—à–Ω–∏–µ CLI
- `wg` (`wireguard-tools`) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π, –ø–æ–ª—É—á–µ–Ω–∏–µ public key, —Å–æ–∑–¥–∞–Ω–∏–µ PSK.
- `wireguard-vanity-address` ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `vanity_length > 0`.
- –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–¥ Python 3.10\+ –Ω–∞ Windows.

### Python
- Python 3.10+.
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ `requirements.txt` (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `pip install -r requirements.txt`).

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### `wg_config.yaml`
- –î–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ —Å—Ç—Ä–æ–∫—É: `# yaml-language-server: $schema=./schemas/wg_config.schema.json`.
- –±–ª–æ–∫ `server`: `endpoint`, `ipv4`, `ipv6`, `private_key`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `port`, `dns_ipv4`/`dns_ipv6`, `keepalive_on_server`, `amneziawg_on_server`, `mtu`, `mtu_comment`.
- –±–ª–æ–∫ `client_defaults`: `persistent_keepalive`, `vanity_length`, `mtu_comment` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞—Å–ª–µ–¥—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —à–∞–±–ª–æ–Ω).
- –±–ª–æ–∫ `psk`: `mode` (`generate`/`generate_per_client`/`static`), `value` –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞, `reuse` –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.
- –±–ª–æ–∫ `amneziawg`: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã JunkPacket/RandomData/Handshake/Transport.
- –±–ª–æ–∫ `amneziawg_special_packets`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ I1..I5 (Custom Protocol Signature) –∏–∑ JSON-—Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `./amnezia-I-list.json`; —Ñ–∞–π–ª –¥–µ—Ä–∂–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ).
  - –†—É—á–Ω—ã–µ I1..I5 –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø—Ä—è–º–æ –≤ `amneziawg` (–µ–¥–∏–Ω—ã–π –Ω–∞–±–æ—Ä) ‚Äî —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
  - –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω `amnezia-I-list.example.json`: —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π `amnezia-I-list.json` –∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å —á–µ—Ä–µ–∑ `amneziawg_special_packets.file`. –ü—É—Ç—å —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `wg_config.yaml`.
  - `enabled` (`null` = –∞–≤—Ç–æ, `false` = –≤—ã–∫–ª—é—á–∏—Ç—å –¥–∞–∂–µ –ø—Ä–∏ —Ä—É—á–Ω—ã—Ö I-–ø–æ–ª—è—Ö), `file`, `cycle`, `random_cycle`, `cycles_pool`, `mode`, `reuse_within_client`.
  - `mode`: `global` (–æ–¥–∏–Ω –Ω–∞–±–æ—Ä –Ω–∞ –≤—Å–µ—Ö), `per_client_random` (—Å–ª—É—á–∞–π–Ω–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞), `per_subnet_unique` (—Å—Ç–∞—Ä–∞–µ—Ç—Å—è —Ä–∞–∑–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ–¥—Å–µ—Ç–∏).
  - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–¥–∞—ë—Ç—Å—è random cycle –Ω–∞ –∫–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç (mode=per_client_random); –ø—Ä–∏ `mode=global` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –Ω–∞ –≤—Å–µ—Ö.
  - –ï—Å–ª–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥–∞—Ö —É–∂–µ –µ—Å—Ç—å I1..I5, –∞ –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –∏—Ö –Ω–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–ª–æ–∫ `amneziawg_special_packets` –æ—Ç–∫–ª—é—á—ë–Ω –∏–ª–∏ —Ñ–∞–π–ª –Ω–µ –∑–∞–¥–∞–Ω), —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.
  - QR —Å I-–ø–æ–ª—è–º–∏ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏; –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å QR –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ `client_defaults.generate_qr=false`.

### `subnets.csv`
- —Ñ–æ—Ä–º–∞—Ç `prefix;num_clients` (—Å–º. `subnets.example.csv`).
- –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –ø–æ–¥—Å–µ—Ç–µ–π –≤ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö.

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã
- `clients/<prefix>/<prefix>_clientN.conf` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π/PSK.
- –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –∏–∑ CSV —Å–∫—Ä–∏–ø—Ç —Å–ø—Ä–æ—Å–∏—Ç, –Ω—É–∂–Ω–æ –ª–∏ —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–¥—Å–µ—Ç–∏.

## –ó–∞–ø—É—Å–∫

1. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ `wg_config.yaml` –∏ `subnets.csv`, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –ª–∏—à–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –≤ `clients/`.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`pip install -r requirements.txt`) –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `wg`/`wireguard-vanity-address` –¥–æ—Å—Ç—É–ø–Ω—ã –≤ PATH.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:
   ```
   python generate_wg_configs.py -c config/wg_config.yaml -s data/subnets.csv -o ./artifacts
   ```
   –î–ª—è ¬´—Å—É—Ö–æ–π¬ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤: `python generate_wg_configs.py --validate`.
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–¥—Å–∫–∞–∑–∫–∞–º (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥—Å–µ—Ç–µ–π, –ø–µ—Ä–µ–Ω–æ—Å PSK, —á—Ç–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤).

| –ö–ª—é—á | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- |
| `-c/--config` | –ü—É—Ç—å –∫ `wg_config.yaml` |
| `-s/--subnets` | –ü—É—Ç—å –∫ `subnets.csv` |
| `-o/--output-root` | –ö–∞—Ç–∞–ª–æ–≥, –∫—É–¥–∞ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã `server/` –∏ `clients/` |
| `--validate` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –∑–∞–ø–∏—Å–∏ —Ñ–∞–π–ª–æ–≤ |
| `--force` | –ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å `server/`/`clients/` –∏ QR –¥–∞–∂–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º; –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ `--validate`) |

> –í–∞–∂–Ω–æ: –µ—Å–ª–∏ –∑–∞–¥–∞—Ç—å `-o/--output-root` –≤ –∫–∞—Ç–∞–ª–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è Git, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–µ–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏. –õ–∏–±–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `-o` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `server/` –∏ `clients/` —É–∂–µ –≤ `.gitignore`), –ª–∏–±–æ –¥–æ–±–∞–≤—å—Ç–µ `<output-root>/server` –∏ `<output-root>/clients` –≤ –∏–≥–Ω–æ—Ä—ã –ª–æ–∫–∞–ª—å–Ω–æ.

> `WG_CONFIG_GEN_ASSUME_YES=1` –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –í–∫–ª—é—á–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–π —Å—Ä–µ–¥–µ.

## PSK, AmneziaWG –∏ keepalive

- `psk: generate` ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–±—â–∏–π PSK, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ä–µ–∂–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ `static`.
- `psk: generate_per_client` ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π PSK.
- `psk: static` + `value` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ Base64, 32 –±–∞–π—Ç–∞). –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å PSK –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
- `psk.reuse=true` –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–π PSK, `false` ‚Äî —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è –ø–µ—Ä–µ–¥ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π.
- `amneziawg_on_server` + –±–ª–æ–∫ `amneziawg` –¥–æ–±–∞–≤–ª—è—é—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `[Interface]` —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤.
- `persistent_keepalive` –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–∞–º; –ø—Ä–∏ `keepalive_on_server=true` —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥.

## Netcraze/Keenetic: –∏–º–ø–æ—Ä—Ç .conf + ASC

Netcraze (–±—ã–≤—à. Keenetic) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç I1..I5. –ù–∞—á–∏–Ω–∞—è —Å –ø—Ä–æ—à–∏–≤–∫–∏ 5.0.2 ASC –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `.conf`; –≤ –≤–µ—Ä—Å–∏—è—Ö –¥–æ 5.0.2 –ø—Ä–æ–ø–∏—Å—ã–≤–∞–π—Ç–µ ASC –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Web CLI/SSH (`wireguard asc ...`).

–ü–æ—à–∞–≥–æ–≤–æ:
1. –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ: ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç¬ª ‚Üí ¬´–î—Ä—É–≥–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è¬ª / ¬´WireGuard¬ª ‚Üí ¬´–ò–º–ø–æ—Ä—Ç –∏–∑ —Ñ–∞–π–ª–∞¬ª ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π `.conf`.
2. –û—Ç–∫—Ä–æ–π—Ç–µ Web CLI: –∑–∞–º–µ–Ω–∏—Ç–µ `.../dashboard` –Ω–∞ `.../a` (–ø—Ä–∏–º–µ—Ä: `https://<router>/a`). –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ SSH/Telnet –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö.
3. –£–∑–Ω–∞–π—Ç–µ –∏–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Å–º. –≤ UI –∏–ª–∏ –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `anos_client3`).
4. –í Web CLI –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –æ—á–µ—Ä–µ–¥–∏:
   - `show interface` ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ —Ç–æ—á–Ω–æ–µ –∏–º—è.
   - `interface <NAME>` ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω—É–∂–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
   - `wireguard asc <Jc> <Jmin> <Jmax> <S1> <S2> <H1> <H2> <H3> <H4>` ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å ASC –∏–∑ –≤–∞—à–µ–≥–æ `wg_config.yaml`.
   - `show running-config` ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –±–ª–æ–∫–µ `[interface <NAME>]` –ø–æ—è–≤–∏–ª–∞—Å—å —Å—Ç—Ä–æ–∫–∞ `wireguard asc ...`.
   - `system configuration save` ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –∏—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.
   –î–µ—Ñ–æ–ª—Ç (—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å –æ–±—ã—á–Ω—ã–º WireGuard): `wireguard asc 0 0 0 0 0 1 2 3 4`.
## Vanity-–∫–ª—é—á–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å `name[:vanity_length]`.
- –ü—Ä–∏ `vanity_length=0` —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é `wg genkey`.
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞ ‚Äî 10 —Å–∏–º–≤–æ–ª–æ–≤ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ —Å–∫—Ä–∏–ø—Ç).

## –õ–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥: `wg-atelier.log`.
- –ü—Ä–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏ Ctrl+C –ª–æ–≤–∏—Ç—Å—è `KeyboardInterrupt`, –∑–∞–ø–∏—Å—å –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ª–æ–≥.
- –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º –ø–æ–ª–µ–∑–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å `python -m py_compile generate_wg_configs.py` –∏ `python generate_wg_configs.py --validate` –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –∏ –∫–æ–Ω—Ñ–∏–≥–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∏–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.
- –°–∫—Ä–∏–ø—Ç –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∞ `0600` –Ω–∞ –∫–æ–Ω—Ñ–∏–≥–∏ (–Ω–∞ Windows ‚Äî —á–µ—Ä–µ–∑ `icacls`, –æ—Ç–∫–ª—é—á–∞—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–¥–∞–≤–∞—è –ø—Ä–∞–≤–∞ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é). –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ –∫–∞—Ç–∞–ª–æ–≥–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º.
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ `wg_config.yaml.<timestamp>.bak` –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è Git; —Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º –º–µ—Å—Ç–µ –∏–ª–∏ —É–¥–∞–ª—è–π—Ç–µ –≤—Ä—É—á–Ω—É—é.
- –ü–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≥–æ–Ω—è—Ç—å `gitleaks detect --source . --redact`.
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `WG_CONFIG_GEN_ASSUME_YES` –≤ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –∫–ª—é—á–µ–π.

## –ó–∞–∫–æ–Ω–Ω–æ—Å—Ç—å

- –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è WireGuard/AmneziaWG –≤ —Ä–∞–º–∫–∞—Ö –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–ª–∏ —è–≤–Ω–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π (–¥–æ–º–∞—à–Ω—è—è —Å–µ—Ç—å, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è).
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –∑–∞–∫–æ–Ω–æ–º, –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.




